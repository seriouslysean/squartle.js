/**
 * Splitleaf_Squartle
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the MIT LICENSE
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/MIT
 *
 * @category   Splitleaf
 * @package    Splitleaf_Squartle
 * @copyright  Copyright 2013 Splitleaf, LLC
 * @license    http://opensource.org/licenses/MIT
 * @author     Sean Kennedy <sean@splitleaf.net>
 * @version    1.0.0
 */
(function(e,t,n,r){function o(t,n){this.element=t;this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}var i="squartle";var s={containerClass:"squartle-container",heroContainerClass:"squartle-heroes",heroEnable:true,heroClass:"squartle-hero",heroDefault:0,listClass:"squartle-list",itemClass:"squartle-item",imageClass:"squartle-image",imageHoverClass:"squartle-image-hover",itemsAcross:"3"};o.prototype={init:function(){this._setClasses(this.element,this.options);this._setStyles(this.element,this.options);this._setHover(this.element,this.options);if(this.options.heroEnable)this._setHero(this.element,this.options)},_setClasses:function(t,n){e(t).addClass(n.containerClass);e("> ul",t).addClass(n.listClass);e("> ul > li",t).addClass(n.itemClass);e("> ul > li div",t).addClass(n.heroClass);e("> ul > li img",t).addClass(n.imageClass)},_setStyles:function(t,n){width=100/n.itemsAcross;e(t).css("overflow","hidden");e("> ul",t).css("overflow","hidden");e("> ul > li",t).css("overflow","hidden").css("float","left").css("display","block").css("position","relative").css("width",width+"%");e("> ul > li > div",t).css("overflow","hidden").css("position","relative").css("height","auto").css("width","100%");e("> ul > li > div",t).find("*").css("width","auto").css("height","auto").css("max-width","100%");e("> ul > li img",t).css("height","auto").css("width","auto").css("max-width","100%").css("display","block").css("top","0").css("left","0")},_setHover:function(t,n){e("li",t).each(function(){links=e("a",this);images=e("img",this);if(links.length){links.each(function(){link=e(this);image=e("> img",link);if(image.data("hover")){hover=e("<img>").attr("src",image.data("hover")).attr("alt",image.attr("alt")).css("height","auto").css("width","auto").css("max-width","100%").css("position","absolute").css("top","0").css("left","0").css("z-index","10").css("display","none").addClass(n.imageHoverClass);e(link).append(hover);e(link).hover(function(t){t.preventDefault();if(!e(this).hasClass("active"))e("> ."+n.imageHoverClass,this).finish().fadeIn("fast")},function(t){t.preventDefault();if(!e(this).hasClass("active"))e("> ."+n.imageHoverClass,this).finish().fadeOut("fast")});e(link).click(function(r){r.preventDefault();notActive=e("> a",e(this).parent().siblings().not(e(this).parent()));notActive.removeClass("active");e("> ."+n.imageHoverClass,notActive).finish().fadeOut("fast");e(this).addClass("active");e("> ."+n.imageHoverClass,this).finish().fadeIn("fast");if(n.heroEnable){hero=e("> div > div",t).get(e(this).parent().index());notActive=e("> div > div",t).not(hero);e(hero).css("z-index","10");e(notActive).css("z-index","0");e(notActive).finish().slideUp("fast");e(hero).finish().slideDown("fast")}})}})}else{console.log("No link found!")}})},_setHero:function(t,n){if(!e("> ."+n.heroContainerClass,t).length){heroesContainer=e("<div>").addClass(n.heroContainerClass);e(t).prepend(heroesContainer)}e("li",t).each(function(){heroes=e("> div",this);e("> div",t).append(heroes)});e("a",e("> ul > li",t).get(n.heroDefault)).click()}};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}})}})(jQuery,window,document)